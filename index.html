<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Libra wallet for Testnet">
  <title>Libra Testnet Wallet powered by MoveOnLibra</title>
  <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/bootstrap/4.3.1/css/bootstrap.min.css"
    crossorigin="anonymous">
</head>

<body>
  <div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom box-shadow">
    <a href="https://www.moveonLibra.com" target="_blank"><img src="https://www.moveonlibra.com/mol_60.png"
        alt="Move On Libra" id="site-logo"></a>
    <h3 class="my-0 mr-md-auto font-weight-bold" style="color: #4a3c94;">LIBRA Wallet Demo</h3>
    <nav class="my-2 my-md-0 mr-md-3">
      <a class="p-2 text-dark" href="https://community.libra.org/c/testnet/9" target="_blank">About Testnet</a>
      <a class="p-2 text-dark" href="https://explorer.moveonlibra.com" target="_blank">Testnet Explorer</a>
      <a class="p-2 text-dark" href="https://github.com/MoveOnLibra/libra-wallet-demo" target="_blank"><svg height="16"
          class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>Source</a>
    </nav>
  </div>


  <div class="container mb-4">
    <div class="row  justify-content-md-center">
      <div class="col-lg-10 mx-1 border box-shadow rounded" style="height: 600px">
        <p>Variable width content</p>
      </div>
    </div>
  </div>


  <style>
    footer .footer-bottom.slim {
      padding-top: 20px;
      position: relative;
    }

    footer .footer-bottom.slim .copyright {
      text-align: center;
      margin-top: 0px;
      margin-bottom: 20px;
    }

    footer .footer-bottom .copyright {
      font-weight: 400;
      font-size: 14px;
      line-height: 24px;
      color: #F3F8FF;
      letter-spacing: 1.7px;
      text-align: left;
      margin-top: -15px;
      margin-bottom: 50px;
    }
  </style>

  <footer id="contact" style="background-image: linear-gradient(134deg, #516093 0%, #7A88F1 100%);">
    <div class="footer-bottom slim">
      <div class="container">
        <div class="row">
          <div class="col-lg-12">
            <p class="copyright" style="color: white">2019 Â© Developed and hosted by <a
                href="https://www.MoveOnLibra.com" style="color: white"><strong>Move On Libra</strong></a></p>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js" crossorigin="anonymous"></script>
  <script src="https://ajax.aspnetcdn.com/ajax/bootstrap/4.3.1/bootstrap.bundle.min.js"
    crossorigin="anonymous"></script>

  <script>
    const appkey = "eyJhbGciOiJIUzUxMiJ9.eyJkYXRhIjoidHgxeHl4MXh1IiwiaWF0IjoxNTcyOTI0NzQxLCJleHAiOjE2MDQ0NjA3NDF9.2yh_gbH266nWHQ9E_fghs7vVoFHT7a1Z6Zi-NEYt7VTmzK8GPG7BzrBkJ3HATCoVFawss_tLMqqHRUtsGVkJSQ";
    const host = "https://apitest.moveonLibra.com";

    function call_api(url, data){
      return new Promise(function(resolve, reject) {
        jQuery.post({
          url: host + url,
          headers: { "Authorization": appkey },
          data: data
        })
        .done(function (data) {
          resolve(data)
        })
        .fail(function (jqXHR, textStatus, error) {
          reject(error)
        })
      })
    }

    async function createWallet(name) {
      return await call_api("/v1/wallets",{"name":name});
    }
    async function createAccount(wallet) {
      return await call_api("/v1/wallets/"+wallet.wallet_id+"/accounts",{});
    }
    async function mintCoin(address, micro_libra) {
      data = {
        "number_of_micro_libra": micro_libra,
        "receiver_account_address":address
      }
      return await call_api("/v1/transactions/mint", data);
    }
    async function transferCoin(address, micro_libra) {
      data = {
        "number_of_micro_libra": micro_libra,
        "receiver_account_address":address,
        "sender_account_address":account.address,
        "wallet_id":wallet.wallet_id,
      }
      return await call_api("/v1/transactions/transfer");
    }
    async function create_wallet_account_with_coin(){
      var wallet = await createWallet("wallet-demo-js");
      var account = await createAccount(wallet);
      var result = await mintCoin(account.address, 123);
      console.log(result);
    }
    $(document).ready(function () {
      console.log("document ready.")
      create_wallet_account_with_coin();
    });
  </script>
</body>

</html>